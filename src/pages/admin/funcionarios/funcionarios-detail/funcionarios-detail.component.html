<div class="page-container">

  <div class="header-controls">
    <a routerLink="/admin/dashboard/funcionarios" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Voltar para a lista
    </a>
  </div>

  @if (funcionario) {
    <div class="content-wrapper">
      <form [formGroup]="formulario">
        <div class="form-section">
          <div class="section-header">
            <h2>Detalhes do Funcionário</h2>
            <app-button
              [label]="editButtonLabel"
              (click)="toggleInfoEdit()"
              [icon]="icon"
              [disabled]="isEditing && formulario.invalid"
            />
          </div>

          <div class="section-content">
            <div class="form-row">
              <div class="form-field">
                <label for="nome">Nome Completo</label>
                <input formControlName="nome" type="text" id="nome">
              </div>

              <div class="form-field">
                <label for="cpf">CPF</label>
                <input formControlName="cpf" mask="000.000.000-00" [dropSpecialCharacters]="true" type="text" id="cpf" required>
                @if (cpf?.invalid && cpf?.touched) {
                  <div class="error-message">
                    @if (cpf?.errors?.['required']) { <span>Este campo é obrigatório.</span> }
                    @if (cpf?.errors?.['tamanhoInvalido']) { <span>O CPF deve ter 11 dígitos.</span> }
                    @if (cpf?.errors?.['cpfInvalido']) { <span>O CPF informado é inválido.</span> }
                    @if (cpf?.errors?.['cnpjInvalido']) { <span>O CNPJ informado é inválido.</span> }
                  </div>
                }
              </div>
            </div>

            <div class="form-row">
              <div class="form-field">
                <label for="cargo">Cargo</label>
                <select formControlName="cargo" id="cargo" required>
                  <option value="" disabled>Selecione um cargo</option>
                  @for (cargo of cargos; track cargo) {
                    <option [value]="cargo">{{ cargoLabels[cargo] }}</option>
                  }
                </select>
                @if (cargo?.invalid && cargo?.touched) {
                  <div class="error-message">Cargo é obrigatório.</div>
                }
              </div>
            </div>

            <div class="form-row">
              <div class="form-field">
                <label for="email">E-mail</label>
                <input formControlName="email" type="email" id="email">
              </div>
              <div class="form-field">
                <label for="telefone">Telefone</label>
                <input formControlName="telefone" mask="(00) 00000-0000" type="tel" id="telefone">
              </div>
            </div>

            <div class="form-row">
              <div class="form-field">
                <label>Data de Cadastro</label>
                <input [value]="funcionario.dataCadastro.split(' ')[0]" disabled>
              </div>
              <div class="form-field">
                <label>Hotel</label>
                <input [value]="funcionario.hotel.nome" disabled>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  } @else {
    <p class="loading-message">Carregando dados do funcionário...</p>
  }
</div>
